# 第 5 章：充电与供电 (Charging & Power Delivery)

USB 接口的供电能力从最初的 2.5W (5V 0.5A) 发展到了现在的 240W，彻底改变了电子设备的供电方式。

## 基础充电协议

### USB BC 1.2 (Battery Charging)

USB BC 1.2 是 USB-IF 在 2010 年发布的充电规范，属于官方标准协议。

-   **功率**：最高 7.5W (5V 1.5A)
-   **工作原理**：通过 D+/D- 短路、电阻分压等方式让设备识别充电器类型
-   **端口类型**：
    -   **SDP (Standard Downstream Port)**：标准 USB 端口，500mA
    -   **CDP (Charging Downstream Port)**：可充电+数据传输，1.5A
    -   **DCP (Dedicated Charging Port)**：专用充电端口，1.5A
-   **局限性**：功率较低，已无法满足现代设备的快充需求

## 私有快充协议详解

在 USB PD 统一标准出现之前，各大手机厂商和芯片厂商为了实现快速充电，开发了各自的私有快充协议。这些协议通常通过 **D+/D- 数据线进行握手通信**，实现电压/电流的动态调节。

### 私有协议的工作原理

私有快充协议的核心是 **握手协议**（Handshake Protocol）：

1. **初始阶段**：充电器和设备以 5V 电压连接
2. **识别阶段**：设备通过 D+/D- 数据线向充电器发送特定信号
3. **协商阶段**：充电器识别设备支持的协议，双方协商充电参数
4. **快充阶段**：充电器切换到协商好的高电压/大电流模式
5. **保护机制**：实时监控温度、电流，必要时降压或断电

> [!NOTE]
> D+/D- 引脚本是 USB 传输数据的差分信号线，私有协议巧妙地利用它们在充电时进行低速通信，实现充电器和设备之间的"对暗号"。

---

### 高通 Quick Charge (QC) 系列

高通 Quick Charge 是应用最广泛的私有快充协议之一，随着骁龙处理器的普及而被大量 Android 设备采用。

#### QC 1.0 (2013)
-   **功率**：最高 10W (5V 2A)
-   **特点**：基础的快充实现，主要通过提高电流实现
-   **局限**：功率提升有限

#### QC 2.0 (2014)
QC 2.0 引入了 **多档位电压调节**，是私有快充协议的重要里程碑。

-   **功率**：最高 18W
-   **电压档位**：
    -   Class A: 5V、9V、12V
    -   Class B: 5V、9V、12V、20V
-   **电流**：最高 3A（视电压档位而定）
-   **握手机制**：通过 D+/D- 电压电平识别
    -   5V：D+ = D- = 0.6V
    -   9V：D+ = 3.3V, D- = 0.6V
    -   12V：D+ = 0.6V, D- = 0.6V（特定配置）
    -   20V：D+ = 3.3V, D- = 3.3V（仅 Class B）

#### QC 3.0 (2016)
QC 3.0 实现了更精细的电压调节，减少设备内部的转换损耗。

-   **功率**：最高 18W（部分可达 22W）
-   **电压范围**：3.6V - 20V
-   **步进电压**：**200mV** 微调（相比 QC 2.0 的固定档位，更加灵活）
-   **优势**：
    -   减少设备端的降压发热
    -   充电效率提升至约 **38%**（相比 QC 2.0）
    -   更好的温度控制
-   **兼容性**：向下兼容 QC 2.0

#### QC 4 / QC 4+ (2017-2018)
QC 4/4+ 标志着高通向标准化的转变，开始兼容 USB PD。

-   **功率**：最高 28W (QC 4)，最高 100W (QC 4+)
-   **核心特性**：
    -   **兼容 USB PD 3.0**：可通过 PD 协议充电
    -   **支持 PPS (Programmable Power Supply)**：动态电压调节
    -   **INOV (Intelligent Negotiation for Optimum Voltage)**：智能电压优化
-   **双模式**：既支持传统 QC 协议，也支持 USB PD
-   **安全性**：增强的过温、过压、过流保护

#### QC 5 (2020)
-   **功率**：最高 **100W+**
-   **效率**：超过 98%
-   **特点**：完全拥抱 USB PD 标准，同时保留 QC 私有协议兼容

> [!IMPORTANT]
> QC 4 之后的版本已经基于 USB PD 标准，意味着高通也在推动快充协议的统一化。使用 QC 4+ 充电器可以为支持 PD 的设备（如 iPhone、MacBook）充电。

---

### OPPO VOOC 闪充系列

OPPO 的 VOOC 闪充采用了与众不同的 **低压大电流** 方案，这是私有协议中最具特色的技术路线之一。

#### VOOC (2014)
-   **功率**：20W
-   **电压/电流**：**5V 4A**（初代）
-   **技术特点**：
    -   **低压大电流**：不同于 QC 的高压小电流，保持 5V 低压，提高电流至 4A-5A
    -   **定制接口**：需要特殊的 **7 针 Micro-USB 接口**（比标准 5 针多 2 针用于快充）
    -   **定制线材**：线材内部采用更粗的导线，降低阻抗
    -   **定制适配器**：适配器内置 **MCU (微控制器)** 进行智能电源管理
-   **优势**：
    -   设备端发热低（因为电压低，设备内部转换损耗小）
    -   可以边玩边充（温度控制好）
    -   充电速度快

#### SuperVOOC (2018)
SuperVOOC 进一步提升功率，引入 **双电芯** 技术。

-   **功率**：50W
-   **电压/电流**：**10V 5A**（通过双电芯实现）
-   **双电芯原理**：
    -   手机内置 **两块电池**（每块约 2000mAh）
    -   充电时，10V 电压通过串联给两块电池分别充 5V
    -   每块电池承受 5V 电压，总体实现 10V 5A 的高功率输入
-   **线材要求**：需要更高规格的线材和接口

#### SuperVOOC 2.0 (2019-2020)
-   **功率**：65W
-   **电压/电流**：**10V 6.5A**
-   **应用**：OPPO Find X 系列、Reno 系列高端机型

#### 125W / 240W 超级闪充 (2021-)
OPPO 持续推高功率上限：
-   **125W**：10V 12.5A（双电芯）
-   **240W**：24V 10A（多电芯串联）

> [!WARNING]
> VOOC 系列充电器和线材 **不通用**。必须使用 OPPO 原装或认证配件，否则无法启动快充，甚至可能损坏设备。Type-C 时代的 VOOC 使用标准物理接口，但协议完全私有。

---

### 华为快充协议（FCP / SCP）

华为开发了两套快充协议，分别针对不同的功率需求。

#### FCP (Fast Charge Protocol, 2015)
-   **功率**：18W
-   **电压档位**：9V / 12V
-   **电流**：最高 2A
-   **握手方式**：通过 D+/D- 进行数字通信
-   **应用**：华为中低端机型、荣耀系列

#### SCP (SuperCharge Protocol, 2016)
SCP 是华为的旗舰快充协议，采用 **低压大电流** 方案（类似 VOOC 思路）。

-   **功率**：
    -   SCP 1.0：22.5W (5V 4.5A 或 4.5V 5A)
    -   SCP 2.0：40W (10V 4A，双电芯)
    -   SCP 3.0：66W (11V 6A)
-   **技术特点**：
    -   **直充架构**：电压尽量接近电池电压，减少转换损耗
    -   **智能分档**：根据电池电量动态调整电压电流
    -   **多重保护**：过压、过流、过温、短路保护
-   **兼容性**：向下兼容 FCP

> [!NOTE]
> FCP 和 SCP 是两个独立协议，但华为充电器通常同时支持两者。SCP 充电器可以为 FCP 设备充电（降级为 FCP 模式），但 FCP 充电器无法为 SCP 设备提供超级快充。

---

### 联发科 Pump Express (PE / PE+)

联发科为其芯片平台开发的快充协议，主要应用于搭载联发科处理器的设备。

#### Pump Express Plus (PE+, 2015)
-   **功率**：最高 18-24W
-   **电压范围**：5V - 12V
-   **工作原理**：
    -   通过 D+/D- 发送脉冲信号
    -   充电器接收脉冲后逐步提升电压
    -   设备端通过脉冲数量控制目标电压
-   **特点**：类似 QC 的高压快充方案

#### Pump Express 3.0 (PE 3.0, 2017)
-   **功率**：最高 30W
-   **电压范围**：3V - 6V（转向低压大电流）
-   **USB Type-C**：基于 Type-C 接口
-   **快充速度**：声称 20 分钟充电至 70%

#### 市场现状
随着联发科市场份额的变化和 USB PD 的普及，PE 协议的应用逐渐减少，但仍在部分机型中使用。

---

### vivo FlashCharge

vivo 的快充技术，早期称为"双引擎闪充"。

#### 双引擎闪充 (2016)
-   **功率**：22.5W
-   **电压/电流**：9V 2.5A 或 5V 4.5A
-   **双引擎**：两个充电电路并联，分担电流，降低发热

#### FlashCharge 2.0 及更高功率版本
-   **功率**：44W、55W、66W、120W、200W（不断演进）
-   **技术**：融合高压和低压方案，多电芯管理
-   **兼容性**：vivo 设备间通用，但需要专用充电器

---

### 小米快充协议

#### 小米涡轮快充 (Mi Turbo Charge)
-   **功率**：18W、27W、33W、67W、120W、210W（多代演进）
-   **技术路线**：
    -   早期基于 **QC 3.0**
    -   后期转向 **私有协议 + USB PD** 双模
-   **兼容性**：部分型号兼容 QC，部分仅支持小米私有协议

---

### 魅族快充 (mCharge)

-   **功率**：18W、24W、36W
-   **技术**：类似 QC 的高压方案
-   **应用范围**：魅族品牌设备

---

### 三星 AFC (Adaptive Fast Charging)

-   **功率**：15W、18W
-   **电压档位**：9V
-   **电流**：1.67A (15W)，2A (18W)
-   **握手方式**：通过 D+/D- 数据线通信
-   **兼容性**：与 QC 2.0 部分兼容（都使用 9V 档位）

> [!TIP]
> 三星后期旗舰机型已经转向 **USB PD + PPS**，AFC 主要用于中低端机型和旧款设备。

---

## 私有协议技术对比

| 协议 | 功率范围 | 技术路线 | 主要厂商 | 兼容性 |
|------|---------|---------|---------|--------|
| QC 2.0/3.0 | 18W | 高压小电流 | 高通生态 | 广泛兼容 |
| QC 4+ | 100W | USB PD 兼容 | 高通生态 | PD 互通 |
| VOOC/SuperVOOC | 20-240W | 低压大电流 | OPPO/OnePlus/realme | 封闭生态 |
| FCP | 18W | 高压 | 华为/荣耀 | 华为设备 |
| SCP | 22.5-66W | 低压大电流 | 华为/荣耀 | 华为设备 |
| PE/PE+ | 18-24W | 高压 | 联发科生态 | MTK 设备 |
| AFC | 15-18W | 高压 | 三星 | 部分兼容 QC |

## 私有协议的兼容性与问题

### 跨品牌兼容性
-   **基本不兼容**：不同品牌的私有协议之间通常无法互通
-   **降级充电**：使用非原装充电器时，通常会降级为普通充电（5V 1A/2A）
-   **例外情况**：
    -   QC 2.0/3.0 充电器可以为部分支持 9V 档位的设备充电
    -   部分国产手机同时支持多种协议（如 QC + FCP）

### 线材识别
-   **VOOC 系列**：需要专用线材，线材内有识别芯片
-   **高压协议**：对线材要求相对较低，但需要足够的线径支持大电流
-   **劣质线材风险**：阻抗过大导致压降，影响充电速度和安全

### 向 USB PD 迁移的趋势

> [!IMPORTANT]
> 随着 USB PD 3.0（特别是 **PPS** 功能）的成熟，以及各国推动充电器统一标准（如欧盟强制 Type-C），**私有协议正在逐渐退出历史舞台**。

目前的趋势：
-   **高通**：QC 4+ 完全基于 USB PD
-   **小米**：新机型同时支持私有协议和 PD
-   **三星**：旗舰机转向 PD + PPS
-   **OPPO/华为**：保留私有协议，但也开始支持 PD（通常功率不及私有协议）

### 消费者建议

1. **优先使用原装配件**：私有快充协议需要原装充电器和线材
2. **查看兼容性**：购买第三方充电器时，确认支持的协议列表
3. **关注 USB PD**：新购设备建议选择支持 USB PD 的产品，通用性更好
4. **安全第一**：避免使用劣质充电器和线材，可能损坏设备或引发安全问题

## USB PD (Power Delivery)

USB PD 是由 USB-IF 组织制定的统一快充标准，旨在通过 Type-C 接口为各种设备（手机、平板、笔记本、显示器）供电。

### 版本演进

-   **PD 2.0 / 3.0**: 最高 **100W** (20V 5A)。
    -   常用档位：5V, 9V, 15V, 20V。
-   **PD 3.1**: 引入了 **EPR (Extended Power Range)**，最高 **240W**。
    -   新增档位：28V, 36V, 48V。

### PPS (Programmable Power Supply)

PPS 是 PD 3.0 协议中的一项重要补充功能。它允许设备以 **20mV** 的步进电压进行微调。
-   **优势**：通过动态调整电压，实现直充，减少手机内部降压发热，提高充电效率。
-   **应用**：三星手机的“加速充电”和部分国产手机的兼容快充都依赖 PPS。

## 线材的重要性 (E-Marker 芯片)

不是所有的 Type-C 线都能跑满功率。

-   **3A 线材**：普通的 C-to-C 线，最高支持 60W (20V 3A)。
-   **5A 线材**：内置 **E-Marker 芯片**，告知充电头“我能承受 5A 电流”。只有使用这种线，才能开启 100W (20V 5A) 及以上的快充模式。
-   **EPR 线材**：支持 PD 3.1 240W 的线材，会有专门的标识。
